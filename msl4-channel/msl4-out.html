<script type="text/javascript">
    RED.nodes.registerType('msl4-out',{
        category: 'MSL4',
        color: 'lightgreen',
        defaults: {
            name: {value: ""},
            mslChannel: {value:"", type:"msl-channel-config"},
            channels: {value: ""}
        },
        inputs:1,
        outputs:1,
        icon: "fw-logo.png",
        label: function() {
            if(this.name) return this.name;
            else if (this.channel) return this.channels.flatMap(channel => channel.channelname).join();
            else return "MSL4-Out"
        }
    });
</script>

<script type="text/html" data-template-name="msl4-out">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-mslChannel"><i class="fa fa-tag"></i> MSL-Kanal</label>
        <input type="text" id="node-input-mslChannel">
    </div>
</script>

<script type="text/x-red" data-help-name="msl4-out">
    <h3>MSL4 Out</h3>
    <p>Node zur Setzung von Werten der MSL4 Ausgangskanäle</p>
    <p>
        Damit diesem Node Kanäle zugeordnet werden können, muss über das "MSL-Kanal"-Auswahlfeld ein neues MSL-Kanal-Konfigurationsnode erstellt werden.
        Über dieses Konfigurationsnode erfolgt die Zuordnung eines bestimmten Gerätes sowie von Kanälen dieses Gerätes.
        Damit dieses Node die Werte der zugeordneten Kanäle setzen kann, muss ihm ein Array mit numerischen Werten übergeben dessen Größe der Anzahl von zugeordneten Kanälen entsprechen muss.
        Beispiel: [1] => [Digital Out 1]; [0, 1] => [Digital Out 1, Digital Out 2]; [0, 1, 0] => [Digital Out 1, Digital Out 2, Digital Out 3] usw.
    </p>
</script>